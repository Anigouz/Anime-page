<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AniGouz</title>
  <style>
    /* Body va umumiy stil */
    body { 
      font-family: Arial, sans-serif; 
      margin: 0; 
      padding: 0;
      overflow-x: hidden;
    }

    /* Video fonni o‘rnatish */
    #bg-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1; /* Video pastki qatlamda bo‘ladi */
    }

    /* Qora overlay */
    #overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6); /* 0.6 o‘tkazuvchanlikda qora fon */
      z-index: 1;
    }

    /* Sahifa kontenti */
    header, footer { 
      background: #222; 
      color: white; 
      text-align: center; 
      padding: 1rem; 
      z-index: 2; 
    }
    nav a { 
      color: white; 
      margin: 0 10px; 
      cursor: pointer; 
      text-decoration: none; 
    }
    .container { 
      max-width: 900px; 
      margin: auto; 
      padding: 20px; 
      z-index: 2; 
    }
    .trailer, .news-item { 
      background: white; 
      padding: 15px; 
      border-radius: 8px; 
      margin-bottom: 15px; 
      box-shadow: 0 0 10px rgba(0,0,0,0.1); 
    }
    .trailer img { 
      width: 100%; 
      cursor: pointer; 
      border-radius: 8px; 
    }
    .news-item img { 
      width: 100%; 
      border-radius: 8px; 
    }
    .ad-banner { 
      background: #ddd; 
      text-align: center; 
      padding: 20px; 
      margin: 30px 0; 
      font-weight: bold; 
    }
    #video-player { 
      display: none; 
      text-align: center; 
      margin-top: 20px; 
    }
    iframe { 
      width: 100%; 
      height: 500px; 
      border: none; 
      border-radius: 10px; 
    }
    #home, #news { 
      display: none; 
    }
    .admin-panel { 
      background: #fff; 
      padding: 20px; 
      border-radius: 8px; 
      margin-top: 20px; 
      box-shadow: 0 0 10px rgba(0,0,0,0.1); 
    }
    .admin-panel input, .admin-panel textarea { 
      width: 100%; 
      padding: 10px; 
      margin: 5px 0; 
      border: 1px solid #ccc; 
      border-radius: 5px; 
    }
    .admin-panel button { 
      padding: 10px 15px; 
      background-color: #222; 
      color: white; 
      border: none; 
      border-radius: 5px; 
      cursor: pointer; 
    }
    .login-panel { 
      display: none; 
      background: #fff; 
      padding: 20px; 
      border-radius: 8px; 
      margin-top: 20px; 
      box-shadow: 0 0 10px rgba(0,0,0,0.1); 
    }
    .login-panel input { 
      width: 100%; 
      padding: 10px; 
      margin: 5px 0; 
      border: 1px solid #ccc; 
      border-radius: 5px; 
    }
    .login-panel button { 
      padding: 10px 15px; 
      background-color: #222; 
      color: white; 
      border: none; 
      border-radius: 5px; 
      cursor: pointer; 
    }
  </style>
</head>
<body>

<!-- Background Video -->
<video id="bg-video" autoplay muted loop>
  <source src="https://www.w3schools.com/html/movie.mp4" type="video/mp4"> <!-- O'zingizning video linkini kiriting -->
  Your browser does not support the video tag.
</video>

<!-- Overlay -->
<div id="overlay"></div>

<!-- Header -->
<header>
  <h1>AniGouz</h1>
  <nav>
    <a onclick="showSection('home')">Home</a>
    <a onclick="showSection('news')">News</a>
    <a onclick="showSection('login')">Admin Login</a> <!-- Admin Login link -->
  </nav>
</header>

<!-- Video Player -->
<div id="video-player">
  <div class="container">
    <iframe id="yt-frame" allowfullscreen></iframe>
  </div>
</div>

<!-- Home Section -->
<div id="home" class="container">
  <h2>Latest Anime Trailers</h2>
  <div id="trailers"></div>
</div>

<!-- News Section -->
<div id="news" class="container">
  <h2>Latest News</h2>
  <div id="news-list"></div>
</div>

<!-- Admin Login Section -->
<div id="login" class="container login-panel">
  <h2>Enter Admin Password</h2>
  <input type="password" id="admin-password" placeholder="Enter Admin Password"/>
  <button onclick="login()">Login</button>
</div>

<!-- Admin Section -->
<div id="admin" class="container admin-panel">
  <h2>Add New Post</h2>
  <input type="text" id="new-title" placeholder="Post Title"/>
  <input type="text" id="new-image" placeholder="Post Image URL"/>
  <textarea id="new-description" placeholder="Post Description"></textarea>
  <button onclick="addNewsPost()">Add Post</button>
</div>

<!-- Ad Banner -->
<div class="ad-banner">
  Bu yerda sizning reklamangiz bo'lishi mumkin!
</div>

<!-- Footer -->
<footer>
  &copy; 2025 AniGouz. Barcha huquqlar himoyalangan.
</footer>

<script>
  const newsDataKey = "newsData"; // Local storage da saqlash uchun kalit
  const adminPassword = "anigouzadmin"; // Admin paroli (istalgan tarzda o'zgartiring)

  // Initial data loading
  window.onload = () => {
    showSection('home');
    loadTrailers();
    loadNews();
    checkAdminLogin();
  };

  // Show specific sections
  function showSection(section) {
    document.getElementById("home").style.display = "none";
    document.getElementById("news").style.display = "none";
    document.getElementById("admin").style.display = "none";
    document.getElementById("video-player").style.display = "none";
    document.getElementById("login").style.display = "none";
    if (section === 'home') document.getElementById("home").style.display = "block";
    else if (section === 'news') document.getElementById("news").style.display = "block";
    else if (section === 'admin') document.getElementById("admin").style.display = "block";
    else if (section === 'login') document.getElementById("login").style.display = "block";
  }

  // Login as admin (password validation)
  function login() {
    const password = document.getElementById('admin-password').value;
    if (password === adminPassword) {
      localStorage.setItem("adminLoggedIn", "true"); // Set admin logged in status
      showSection('admin');
    } else {
      alert("Incorrect password!");
    }
  }

  // Check if admin is logged in
  function checkAdminLogin() {
    const isLoggedIn = localStorage.getItem("adminLoggedIn");
    if (isLoggedIn === "true") {
      showSection('admin');
    }
  }

  // Trailerni o‘ynatish
  function playTrailer(videoId) {
    document.getElementById("home").style.display = "none";
    document.getElementById("news").style.display = "none";
    document.getElementById("video-player").style.display = "block";
    document.getElementById("yt-frame").src = `https://www.youtube.com/embed/${videoId}`;
  }

  // Jikan API orqali anime treylerlarini olish
  async function loadTrailers() {
    const res = await fetch("https://api.jikan.moe/v4/anime?q=trailer&limit=6");
    const data = await res.json();
    const container = document.getElementById("trailers");
    container.innerHTML = '';
    data.data.forEach(anime => {
      if (anime.trailer?.youtube_id) {
        const div = document.createElement('div');
        div.className = 'trailer';
        div.innerHTML = `
          <h3>${anime.title}</h3>
          <img src="${anime.trailer.images?.maximum || anime.images.jpg.image_url}" alt="${anime.title}" onclick="playTrailer('${anime.trailer.youtube_id}')"/>
        `;
        container.appendChild(div);
      }
    });
  }

  // Yangiliklarni yuklash (localStorage)
  function loadNews() {
    const storedNews = JSON.parse(localStorage.getItem(newsDataKey)) || [];
    const container = document.getElementById("news-list");
    container.innerHTML = '';
    storedNews.forEach(post => {
      const div = document.createElement('div');
      div.className = 'news-item';
      div.innerHTML = `
        <h3>${post.title}</h3>
        <img src="${post.image}" alt="${post.title}">
        <p>${post.description}</p>
        <p><strong>Ko'rishlar:</strong> <span id="view-${post.id}">${post.views}</span></p>
      `;
      container.appendChild(div);
      setTimeout(() => {
        let el = document.getElementById(`view-${post.id}`);
        el.innerText = parseInt(el.innerText) + 1;
      }, 1000);
    });
  }

  // Yangilik qo‘shish
  function addNewsPost() {
    const title = document.getElementById('new-title').value;
    const image = document.getElementById('new-image').value;
    const description = document.getElementById('new-description').value;
    if (title && image && description) {
      const newPost = {
        id: Date.now(),
        title: title,
        image: image,
        description: description,
        views: 0
      };
      const storedNews = JSON.parse(localStorage.getItem(newsDataKey)) || [];
      storedNews.push(newPost);
      localStorage.setItem(newsDataKey, JSON.stringify(storedNews));
      loadNews();
    }
  }
</script>

</body>
  </html>
  
